(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2becd053"],{"01d8":function(e,t,a){},"0e6b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"page-container"},[a("div",{staticClass:"toolbar"},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"编号"},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}})],1),a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"用户名"},model:{value:e.filters.userName,callback:function(t){e.$set(e.filters,"userName",t)},expression:"filters.userName"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"评论对象"},model:{value:e.filters.entityType,callback:function(t){e.$set(e.filters,"entityType",t)},expression:"filters.entityType"}},[a("el-option",{attrs:{label:"话题",value:"topic"}}),a("el-option",{attrs:{label:"文章",value:"article"}}),a("el-option",{attrs:{label:"评论",value:"comment"}})],1)],1),a("el-form-item",[a("el-input",{attrs:{clearable:"",placeholder:"对象编号"},model:{value:e.filters.entityId,callback:function(t){e.$set(e.filters,"entityId",t)},expression:"filters.entityId"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:e.list},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},[a("el-option",{attrs:{label:"正常",value:"0"}}),a("el-option",{attrs:{label:"删除",value:"1"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.list}},[e._v(" 查询 ")])],1)],1)],1),e.results&&e.results.length>0?a("div",{staticClass:"page-section comments-div"},[a("ul",{staticClass:"comments"},e._l(e.results,(function(t){return a("li",{key:t.id},[a("div",{staticClass:"comment-item"},[a("avatar",{attrs:{user:t.user}}),a("div",{staticClass:"content"},[a("div",{staticClass:"meta"},[a("span",{staticClass:"nickname"},[a("a",{attrs:{href:e._f("siteUrl")("/user/"+t.user.id),target:"_blank"}},[e._v(e._s(t.user.nickname))])]),a("span",[e._v("ID: "+e._s(t.id))]),a("span",{staticClass:"create-time"},[e._v("@"+e._s(e._f("formatDate")(t.createTime)))]),"article"===t.entityType?a("span",[a("a",{attrs:{href:e._f("siteUrl")("/article/"+t.entityId),target:"_blank"}},[a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("文章："+e._s(t.entityId))])],1)]):e._e(),"topic"===t.entityType?a("span",[a("a",{attrs:{href:e._f("siteUrl")("/topic/"+t.entityId),target:"_blank"}},[a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("话题："+e._s(t.entityId))])],1)]):e._e(),"comment"===t.entityType?a("span",[a("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("评论："+e._s(t.quoteId))])],1):e._e(),a("div",{staticClass:"tools"},[1===t.status?a("span",{staticClass:"item info"},[e._v("已删除")]):a("a",{staticClass:"item",on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])])]),a("div",{staticClass:"summary",domProps:{innerHTML:e._s(t.content)}})])],1)])})),0)]):a("div",{staticClass:"page-section comments-div"},[e._m(0)]),e.page.total>0?a("div",{staticClass:"pagebar"},[a("el-pagination",{attrs:{"page-sizes":[20,50,100,300],"current-page":e.page.page,"page-size":e.page.limit,total:e.page.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handlePageChange,"size-change":e.handleLimitChange}})],1):e._e()])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notification is-primary"},[a("strong",[e._v("无数据 或 输入相应参数进行查询")])])}],n=a("1da1"),l=(a("96cf"),a("df3a")),r={components:{Avatar:l["a"]},data:function(){return{results:[],listLoading:!1,page:{},filters:{},selectedRows:[]}},mounted:function(){},methods:{list:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,e.listLoading=!0,s=Object.assign(e.filters,{skipCount:e.getSkipCount(a.page.page,a.page.limit),maxResultCount:a.page.limit}),t.prev=3,t.next=6,e.axios.post("/api/app/comment/paged",s);case 6:i=t.sent,e.results=i.items,e.page.total=i.totalCount;case 9:return t.prev=9,e.listLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})))()},handlePageChange:function(e){this.page.page=e,this.list()},handleLimitChange:function(e){this.page.limit=e,this.list()},handleSelectionChange:function(e){this.selectedRows=e},handleDelete:function(e){var t=this,a=this;this.$confirm("确认要删除评论？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.delete("/api/app/comment/".concat(e.id)).then((function(e){a.$message.success("删除成功"),a.list()})).catch((function(e){a.$notify.error({title:"错误",message:e.message})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},o=r,c=(a("920a"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"b5355430",null);t["default"]=u.exports},"920a":function(e,t,a){"use strict";a("01d8")}}]);
//# sourceMappingURL=chunk-2becd053.a91ecdf0.js.map